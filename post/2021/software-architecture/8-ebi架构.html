<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>8.EBI架构 - P3的Blog</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="p3p3pp3"><meta name=description content="这篇文章是 软件架构编年史( 译)的一部分，这部编年史由 一系列关于软件架构的文章组成。在这一系列文章中，我将写下我对软件架构的学习和思考，以及我"><meta name=keywords content="P3,blog,coding"><meta name=baidu-site-verification content="code-rMlGvJbrZW"><meta name=google-site-verification content="iTJj3dp57yfylJL_-Z2_nwxz5Dz6jnf1xAwgKb6TS_g"><meta name=generator content="Hugo 0.109.0 with theme even"><link rel=canonical href=https://p3p3pp3.github.io/post/2021/software-architecture/8-ebi%E6%9E%B6%E6%9E%84.html><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<link href=/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:title" content="8.EBI架构"><meta property="og:description" content="这篇文章是 软件架构编年史( 译)的一部分，这部编年史由 一系列关于软件架构的文章组成。在这一系列文章中，我将写下我对软件架构的学习和思考，以及我"><meta property="og:type" content="article"><meta property="og:url" content="https://p3p3pp3.github.io/post/2021/software-architecture/8-ebi%E6%9E%B6%E6%9E%84.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-05-16T13:59:29+08:00"><meta property="article:modified_time" content="2021-05-16T13:59:29+08:00"><meta itemprop=name content="8.EBI架构"><meta itemprop=description content="这篇文章是 软件架构编年史( 译)的一部分，这部编年史由 一系列关于软件架构的文章组成。在这一系列文章中，我将写下我对软件架构的学习和思考，以及我"><meta itemprop=datePublished content="2021-05-16T13:59:29+08:00"><meta itemprop=dateModified content="2021-05-16T13:59:29+08:00"><meta itemprop=wordCount content="1907"><meta itemprop=keywords content="architecture,EBI,"><meta name=twitter:card content="summary"><meta name=twitter:title content="8.EBI架构"><meta name=twitter:description content="这篇文章是 软件架构编年史( 译)的一部分，这部编年史由 一系列关于软件架构的文章组成。在这一系列文章中，我将写下我对软件架构的学习和思考，以及我"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>P3的Blog</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post.html><li class=mobile-menu-item>Archives</li></a><a href=/tags.html><li class=mobile-menu-item>Tags</li></a><a href=/categories.html><li class=mobile-menu-item>Categories</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>P3的Blog</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post.html>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags.html>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories.html>Categories</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>8.EBI架构</h1><div class=post-meta><span class=post-time>2021-05-16</span>
<span class=more-meta>约 1907 字</span>
<span class=more-meta>预计阅读 4 分钟</span>
<span id=busuanzi_container_page_pv class=more-meta><span id=busuanzi_value_page_pv><img src=/img/spinner.svg alt=spinner.svg></span> 次阅读</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#实体>实体</a></li><li><a href=#边界接口>边界(接口)</a></li><li><a href=#交互器控制>交互器(控制)</a></li><li><a href=#为什么是三种对象类型>为什么是三种对象类型？</a></li><li><a href=#总结>总结</a></li><li><a href=#引用来源>引用来源</a></li></ul></nav></div></div><div class=post-content><p><em>这篇文章是
<a href=https://herbertograca.com/2017/07/03/the-software-architecture-chronicles/ target=_blank>软件架构编年史</a>(
<a href=https://www.jianshu.com/p/b477b2cc6cfa target=_blank>译</a>)的一部分，这部编年史由
<a href=https://herbertograca.com/category/development/series/software-architecture/ target=_blank>一系列关于软件架构的文章</a>组成。在这一系列文章中，我将写下我对软件架构的学习和思考，以及我是如何运用这些知识的。如果你阅读了这个系列中之前的文章，本篇文章的的内容将更有意义。</em></p><p>EBI 架构(Entity-Boundary-Interactor，实体-边界-交互器)架构因为 Robert C. Martin 关于整洁架构(我会在后续的文章中介绍)的讲座而被人熟知。</p><p>然而，Ivar Jacobson 早在 1992 年就在他的著作
<a href=https://www.amazon.com/Object-Oriented-Software-Engineering-Driven-Approach/dp/0201403471 target=_blank>Object-Oriented Software Engineering: A use case driven approach</a>中提出了这个模式。那时，Jacobson 实际上把它叫做实体-接口-控制(Entity-Interface-Control)，但是后来改成了 EBI，避免“接口”和编程语言中的结构“接口”混淆，以及“控制”和 MVC 中的控制器混淆。</p><p><img src=8-EBI%E6%9E%B6%E6%9E%84.assets/4099-eac4742112d8ebcb.jpg alt=img></p><h1 id=实体>实体</h1><p>实体对象承载着系统使用的数据与所有和这些数据天然耦合在一起的行为。每一个实体对象都代表着一个和问题域相关的概念，以及它承载的身份和可恢复的(持久化)数据。Jacobson 告诉我们，实体对象应该包含和对象自己变同时发生变化的逻辑，例如，如果它的数据结构发生变化，这些数据上的操作也需要改变，因此它们也应该放在实体内。</p><p>有意思的是，早在 1992 年，Jacobson 就作出了如下警告：</p><blockquote><p>新手也许有时会让实体对象只携带数据，把所有动态的行为放到控制对象中[&mldr;]。然而，这是应该避免的。[&mldr;] 许多行为反而应该放在实体对象中。——Ivar Jacobson 1992, pp. 134</p></blockquote><p>这就是我们现在所知的“<strong>贫血实体</strong>”。</p><h1 id=边界接口>边界(接口)</h1><p>边界对象是对系统接口的建模。</p><blockquote><p>[…] 和系统接口有关的一切都应该放在接口对象中——Ivar Jacobson 1992, pp. 134</p></blockquote><p>所有依赖系统环境(工具和传达机制)的功能都属于边界对象。</p><p>任何角色和系统的交互都要经过边界对象。如 Jacobson 所述，角色可以是像客户或管理员(操作员)这样的人类用户，也可以是像告警、打印机或者第三方 API 这样的非人类“用户”。</p><p><img src=8-EBI%E6%9E%B6%E6%9E%84.assets/4099-fbac8a48326787a5.jpg alt=img></p><p>回味一下边界的概念，再看看图 7.14，把其中的四个边界想像成六个，我不禁联想到 2005 年才提出的端口和适配器架构(我将在后续的文章中介绍)，整整晚了 13 年。</p><h1 id=交互器控制>交互器(控制)</h1><p>交互器对象承载了和其它任何对象类型天然无关的行为。</p><p>这些行为通常由对实体一些操作组成，最后将某个结果返回给边界对象。</p><blockquote><p>边界对象和实体对象挑剩下的行为会被放在控制对象中。—— Ivar Jacobson 1992, pp. 185</p></blockquote><p>这意味着所有不适合放在边界或实体的行为都会被放在一个或多个控制对象中。</p><p>因此，Jacobson 认为控制对象不仅仅是编排用例的对象，也包括那些拥有和用例有关的行为的对象，它们既不是边界也不是实体。</p><p>根据我的经验，我认为他称为交互器的对象就是我称为应用服务(编排用例)和领域服务(包含领域行为但不是实体)的对象。</p><p>位于中间的交互器对象地位十分重要，原因在于，如果去掉它们，特定用例的逻辑就会被放到实体中。然而，实体会被多个用例使用，因此它们会有通用的用法。特定用例的逻辑如果被放到了实体中，就能被多个边界使用，这些边界最终会把这个实体当成通用逻辑。而我们就会不得不修改这个实体让它适应另一个边界，这会增加实体的复杂性而且可能会破坏用到该实体的其它用例。</p><h1 id=为什么是三种对象类型>为什么是三种对象类型？</h1><p>当时，Jacobson 宣称其它的 OO 方法会把所有的职责都放在实体本身，但是他(和他的支持者)则倾向与将这些职责分散到三种对象类型中，因为这样能让系统更适应变化。</p><blockquote><p>[…] 所有的系统都会发生变化。因此，只有所有的变化都发生在局部，稳定性才会存在，也就是说，变化最好只能影响系统中的一个对象。—— Ivar Jacobson 1992, pg. 135</p></blockquote><p>通过职责的封装将系统的变化控制在局部，就是 EBI 架构的目标。我们仔细思考一下，Jacobson 只是没有直接说出十年之后由 Robert C. Martin 在他的 “<strong>
<a href="https://www.amazon.com/dp/0135974445/ref=wl_it_dp_o_pC_nS_ttl?_encoding=UTF8&colid=CG11VVP0H8Y8&coliid=I1P9T8D1QRUFMM" target=_blank>Agile Software Development, Principles, Patterns, and Practices</a></strong>”一书中提出的**
<a href="https://docs.google.com/open?id=0ByOwmqah_nuGNHEtcU5OekdDMkk" target=_blank>单一职责原则</a>**罢了。</p><h1 id=总结>总结</h1><p>和 MVC 模式中的 Model 代表着整个后端（包括所有实体、服务和它们之间的关系在内的一切）一样，EBI 模式将边界看作是和外部世界的完整连接，而不仅仅是一个视图、一个控制器或是一个接口(这里指的是编程语言结构的接口)。 边界代表了对应着 MVC 中的 View 和 Controller 的整个展现层。EBI 中的实体代表了承载着数据及其行为的真正实体，而交互器对象代表了展现层和实体之间的连接，也就是我所谓的应用服务和领域服务。</p><p>EBI 模式关注后端而 MVC 更关注前端。它们不能互相取代，它们是对方的补充。如果把它们放在一个模式中，我们可以把它叫做视图-控制器-交互器-实体 (View-Controller-Interactor-Entity)。</p><h1 id=引用来源>引用来源</h1><p>1992 – Ivar Jacobson –
<a href=https://www.amazon.com/Object-Oriented-Software-Engineering-Driven-Approach/dp/0201403471 target=_blank>Object-Oriented Software Engineering: A use case driven approach</a><br>2002 – Robert C. Martin –
<a href="https://www.amazon.com/dp/0135974445/ref=wl_it_dp_o_pC_nS_ttl?_encoding=UTF8&colid=CG11VVP0H8Y8&coliid=I1P9T8D1QRUFMM" target=_blank>Agile Software Development, Principles, Patterns, and Practices</a><br>2002 – Robert C. Martin –
<a href="https://docs.google.com/open?id=0ByOwmqah_nuGNHEtcU5OekdDMkk" target=_blank>Single Responsibility Principle</a><br>Eclipse Process Framework –
<a href=http://epf.eclipse.org/wikis/openuppt/openup_basic/guidances/concepts/entity_control_boundary_pattern,_uF-QYEAhEdq_UJTvM1DM2Q.html target=_blank>Entity-Control-Boundary Pattern</a><br>Jon Pearce –
<a href=http://www.cs.sjsu.edu/~pearce/modules/patterns/enterprise/ecb/ecb.htm target=_blank>Implementing Use Cases</a><br>2012 – Robert C. Martin –
<a href=https://youtu.be/Nltqi7ODZTM target=_blank>Clean Architecture (NDC 2012)</a><br>2014 – Adam Bien –
<a href="https://www.youtube.com/watch?v=JWcoiXNoKxk&feature=youtu.be&t=15m14s" target=_blank>How to tackle JEE</a><br>2014 – Ali Parvini –
<a href=http://stackoverflow.com/questions/26910974/model-view-controller-vs-boundary-control-entity target=_blank>Model View Controller vs Boundary Control Entity</a></p></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>p3p3pp3</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2021-05-16</span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/architecture.html>architecture</a>
<a href=/tags/ebi.html>EBI</a></div><nav class=post-nav><a class=prev href=/post/2021/software-architecture/9-%E5%8C%85%E4%B8%8E%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4.html><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">9.包与命名空间</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/post/2021/software-architecture/7-3-action-domain-responder.html><span class="next-text nav-default">7.3.Action-Domain-Responder</span>
<span class="next-text nav-mobile">下一篇</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname==="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="p3sblog",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=https://p3p3pp3.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>由 <a class=hexo-link href=https://gohugo.io>Hugo</a> 强力驱动</span>
<span class=division>|</span>
<span class=theme-info>主题 -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span><div class=busuanzi-footer><span id=busuanzi_container_site_pv>本站总访问量 <span id=busuanzi_value_site_pv><img src=/img/spinner.svg alt=spinner.svg></span> 次</span>
<span class=division>|</span>
<span id=busuanzi_container_site_uv>本站总访客数 <span id=busuanzi_value_site_uv><img src=/img/spinner.svg alt=spinner.svg></span> 人</span></div><span class=copyright-year>&copy;
2017 -
2022<span class=heart><i class="iconfont icon-heart"></i></span><span>p3p3pp3</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script>
<script type=text/javascript>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"ams"}}</script><script async src=https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-134997356-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<script id=baidu_push>(function(){if(window.location.hostname==="localhost")return;var t,n,e=document.createElement("script");e.async=!0,n=window.location.protocol.split(":")[0],n==="https"?e.src="https://zz.bdstatic.com/linksubmit/push.js":e.src="http://push.zhanzhang.baidu.com/push.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script></body></html>